/*Obfuscated by JShaman.com*/function checkSystemRequirements(){if(!AgoraRTC['checkSystemRequirements']||!AgoraRTC['checkSystemRequirements']()){return![];}else{return!![];}}var client,localStream,camera,microphone,localUid;var localStreamInited=![];var streamMaps=new Map();function setAudioVolume(_0x547ed0){streamMaps['forEach'](function(_0x300ccf,_0x45703b,_0x3aa22b){if(_0x547ed0>0x0){if(ignoreList['indexOf'](_0x300ccf['uid'])>=0x0){_0x300ccf['audioTrack']&&_0x300ccf['audioTrack']['setVolume'](0x0);}else{_0x300ccf['audioTrack']&&_0x300ccf['audioTrack']['setVolume'](_0x547ed0);}}else{_0x300ccf['audioTrack']&&_0x300ccf['audioTrack']['setVolume'](_0x547ed0);}});audioVolume=_0x547ed0;}var isOpenMic=![];function openMic(_0x1000a2){if(localStreamInited){isOpenMic=_0x1000a2;localStream['setEnabled'](_0x1000a2);if(window[gameFlag]&&window[gameFlag]['CallGameAudioManager'])window[gameFlag]['CallGameAudioManager']('OpenMicResult',isOpenMic);}else{if(_0x1000a2){getDevices();if(hasAudio){isOpenMic=_0x1000a2;createLocalStream();}else{if(window[gameFlag]&&window[gameFlag]['CallGameAudioManager'])window[gameFlag]['CallGameAudioManager']('createLocalAgoraResult',![]);}}}}var audioVolume=0x0;function openAudio(_0x45aa40){if(_0x45aa40){setAudioVolume(0x32);}else{setAudioVolume(0x0);}}function IsInAgoraRoom(){return client!=null;}function IsopenMic(){return isOpenMic;}function IsopenAudio(){return audioVolume>0x0;}var ignoreList=new Array();function updateIgnoreAudio(_0x53401f){ignoreList=_0x53401f;setAudioVolume(audioVolume);}var hasAudio=![];function getDevices(){AgoraRTC['getDevices']()['then'](_0x370796=>{for(var _0x590ef9=0x0;_0x590ef9!==_0x370796['length'];++_0x590ef9){var _0x2bf00d=_0x370796[_0x590ef9];if(_0x2bf00d['kind']==='audioinput'){hasAudio=!![];microphone=_0x2bf00d['label']||'microphone1\x20';break;}}});}async function joinAgoraRoom(_0x182f15,_0x401545,_0xddd45d){var _0x214799=null;client=AgoraRTC['createClient']({'codec':'vp8','mode':'rtc'});try{const _0x58f206=await client['join'](_0x182f15,_0x401545,_0x214799,_0xddd45d);localUid=_0x58f206;openAudio(0x32);createLocalStream();if(window[gameFlag]&&window[gameFlag]['CallGameAudioManager'])window[gameFlag]['CallGameAudioManager']('JoinAgoraRoomResult',!![]);}catch(_0x4570e4){if(window[gameFlag]&&window[gameFlag]['CallGameAudioManager'])window[gameFlag]['CallGameAudioManager']('JoinAgoraRoomResult',![]);}channelKey='';client['on']('error',function(_0x460afb){console['log']('Got\x20error\x20msg:',_0x460afb['reason']);if(_0x460afb['reason']==='DYNAMIC_KEY_TIMEOUT'){client['renewChannelKey'](channelKey,function(){console['log']('Renew\x20channel\x20key\x20successfully');},function(_0x39bce7){console['log']('Renew\x20channel\x20key\x20failed:\x20',_0x39bce7);});}});client['on']('user-published',async(_0x18ec14,_0x23ef11)=>{await client['subscribe'](_0x18ec14,_0x23ef11);if(_0x23ef11==='audio'||_0x23ef11==='all'){streamMaps['set'](_0x18ec14['uid'],_0x18ec14);setAudioVolume(audioVolume);_0x18ec14['audioTrack']&&_0x18ec14['audioTrack']['play']();}});client['on']('user-unpublished',async(_0x4c2630,_0x243ed2)=>{await client['unsubscribe'](_0x4c2630);if(_0x243ed2==='audio'||_0x243ed2==='all'){_0x4c2630['audioTrack']&&_0x4c2630['audioTrack']['stop']();streamMaps['delete'](_0x4c2630['uid']);console['log']('Remote\x20stream\x20is\x20removed\x20'+_0x4c2630['uid']);}});client['on']('user-left',function(_0x13f033,_0x5e1574){if(_0x13f033){_0x13f033['audioTrack']&&_0x13f033['audioTrack']['stop']();streamMaps['delete'](_0x13f033['uid']);console['log'](_0x13f033['uid']+'\x20leaved\x20from\x20this\x20channel');}});client['enableAudioVolumeIndicator']();client['on']('volume-indicator',function(_0x1257ca){if(window[gameFlag]&&window[gameFlag]['CallGameAudioManager'])window[gameFlag]['CallGameAudioManager']('AudioVolumeIndicator',_0x1257ca);});}async function leaveAgoraRoom(){if(client){try{await client['leave']();localStream['close']();ignoreList['length']=0x0;localStreamInited=![];isOpenMic=![];audioVolume=0x0;client=null;localStream=null;streamMaps['clear']();if(window[gameFlag]&&window[gameFlag]['CallGameAudioManager'])window[gameFlag]['CallGameAudioManager']('LevaAgoraRoomResult');}catch(_0x2f9437){console['log']('Leave\x20channel\x20failed');}}}async function publish(){if(client){try{await client['publish'](localStream);}catch(_0x53c9b1){console['log']('Publish\x20local\x20stream\x20error:\x20'+err);}}}async function unpublish(){if(client){try{await client['unpublish'](localStream);}catch(_0x4e1186){console['log']('Unpublish\x20local\x20stream\x20error:\x20'+err);}}}async function createLocalStream(){if(hasAudio&&client&&localUid){try{localStream=await AgoraRTC['createMicrophoneAudioTrack']();await publish();localStreamInited=!![];openMic(isOpenMic);if(window[gameFlag]&&window[gameFlag]['CallGameAudioManager'])window[gameFlag]['CallGameAudioManager']('createLocalAgoraResult',!![]);}catch(_0x4ac78a){if(window[gameFlag]&&window[gameFlag]['CallGameAudioManager'])window[gameFlag]['CallGameAudioManager']('createLocalAgoraResult',![]);}}}getDevices();
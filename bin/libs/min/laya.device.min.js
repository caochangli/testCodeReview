"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function set(e,t,n,o){return(set="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,o){var i,a=_superPropBase(e,t);if(a){if((i=Object.getOwnPropertyDescriptor(a,t)).set)return i.set.call(o,n),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(o,t)){if(!i.writable)return!1;i.value=n,Object.defineProperty(o,t,i)}else _defineProperty(o,t,n);return!0})(e,t,n,o)}function _set(e,t,n,o,i){if(!set(e,t,n,o||e)&&i)throw new Error("failed to set property");return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=_superPropBase(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,o=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e,t){var n=function AccelerationInfo(){_classCallCheck(this,AccelerationInfo)},o=function RotationInfo(){_classCallCheck(this,RotationInfo)},i=function(e){_inherits(Accelerator,t.EventDispatcher);var o=_createSuper(Accelerator);function Accelerator(e){var t;return _classCallCheck(this,Accelerator),(t=o.call(this)).onDeviceOrientationChange=t.onDeviceOrientationChange.bind(_assertThisInitialized(t)),t}return _createClass(Accelerator,[{key:"on",value:function(e,n,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return _get(_getPrototypeOf(Accelerator.prototype),"on",this).call(this,e,n,o,i),t.ILaya.Browser.window.addEventListener("devicemotion",this.onDeviceOrientationChange),this}},{key:"off",value:function(e,n,o){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.hasListener(e)||t.ILaya.Browser.window.removeEventListener("devicemotion",this.onDeviceOrientationChange),_get(_getPrototypeOf(Accelerator.prototype),"off",this).call(this,e,n,o,i)}},{key:"onDeviceOrientationChange",value:function(e){var n=e.interval;Accelerator.acceleration.x=e.acceleration.x,Accelerator.acceleration.y=e.acceleration.y,Accelerator.acceleration.z=e.acceleration.z,Accelerator.accelerationIncludingGravity.x=e.accelerationIncludingGravity.x,Accelerator.accelerationIncludingGravity.y=e.accelerationIncludingGravity.y,Accelerator.accelerationIncludingGravity.z=e.accelerationIncludingGravity.z,Accelerator.rotationRate.alpha=-1*e.rotationRate.gamma,Accelerator.rotationRate.beta=-1*e.rotationRate.alpha,Accelerator.rotationRate.gamma=e.rotationRate.beta,t.ILaya.Browser.onAndroid?(t.ILaya.Browser.userAgent.indexOf("Chrome")>-1&&(Accelerator.rotationRate.alpha*=180/Math.PI,Accelerator.rotationRate.beta*=180/Math.PI,Accelerator.rotationRate.gamma*=180/Math.PI),Accelerator.acceleration.x*=-1,Accelerator.accelerationIncludingGravity.x*=-1):t.ILaya.Browser.onIOS&&(Accelerator.acceleration.y*=-1,Accelerator.acceleration.z*=-1,Accelerator.accelerationIncludingGravity.y*=-1,Accelerator.accelerationIncludingGravity.z*=-1,n*=1e3),this.event(t.Event.CHANGE,[Accelerator.acceleration,Accelerator.accelerationIncludingGravity,Accelerator.rotationRate,n])}}],[{key:"getTransformedAcceleration",value:function(e){var o;return Accelerator.transformedAcceleration=Accelerator.transformedAcceleration||new n,Accelerator.transformedAcceleration.z=e.z,90==t.ILaya.Browser.window.orientation?(Accelerator.transformedAcceleration.x=e.y,Accelerator.transformedAcceleration.y=-e.x):-90==t.ILaya.Browser.window.orientation?(Accelerator.transformedAcceleration.x=-e.y,Accelerator.transformedAcceleration.y=e.x):t.ILaya.Browser.window.orientation?180==t.ILaya.Browser.window.orientation&&(Accelerator.transformedAcceleration.x=-e.x,Accelerator.transformedAcceleration.y=-e.y):(Accelerator.transformedAcceleration.x=e.x,Accelerator.transformedAcceleration.y=e.y),-90==t.ILaya.stage.canvasDegree?(o=Accelerator.transformedAcceleration.x,Accelerator.transformedAcceleration.x=-Accelerator.transformedAcceleration.y,Accelerator.transformedAcceleration.y=o):90==t.ILaya.stage.canvasDegree&&(o=Accelerator.transformedAcceleration.x,Accelerator.transformedAcceleration.x=Accelerator.transformedAcceleration.y,Accelerator.transformedAcceleration.y=-o),Accelerator.transformedAcceleration}},{key:"instance",get:function(){return Accelerator._instance=Accelerator._instance||new Accelerator(0),Accelerator._instance}}]),Accelerator}();i.acceleration=new n,i.accelerationIncludingGravity=new n,i.rotationRate=new o;var a=function(e){_inherits(Shake,t.EventDispatcher);var n=_createSuper(Shake);function Shake(){return _classCallCheck(this,Shake),n.call(this)}return _createClass(Shake,[{key:"start",value:function(e,n){this.throushold=e,this.shakeInterval=n,this.lastX=this.lastY=this.lastZ=NaN,i.instance.on(t.Event.CHANGE,this,this.onShake)}},{key:"stop",value:function(){i.instance.off(t.Event.CHANGE,this,this.onShake)}},{key:"onShake",value:function(e,n,o,i){if(isNaN(this.lastX))return this.lastX=n.x,this.lastY=n.y,this.lastZ=n.z,void(this.lastMillSecond=t.ILaya.Browser.now());var a=Math.abs(this.lastX-n.x),r=Math.abs(this.lastY-n.y),s=Math.abs(this.lastZ-n.z);this.isShaked(a,r,s)&&(t.ILaya.Browser.now()-this.lastMillSecond>this.shakeInterval&&(this.event(t.Event.CHANGE),this.lastMillSecond=t.ILaya.Browser.now()));this.lastX=n.x,this.lastY=n.y,this.lastZ=n.z}},{key:"isShaked",value:function(e,t,n){return e>this.throushold&&t>this.throushold||e>this.throushold&&n>this.throushold||t>this.throushold&&n>this.throushold}}],[{key:"instance",get:function(){return Shake._instance=Shake._instance||new Shake,Shake._instance}}]),Shake}(),r=function(){function GeolocationInfo(){_classCallCheck(this,GeolocationInfo)}return _createClass(GeolocationInfo,[{key:"setPosition",value:function(e){this.pos=e,this.coords=e.coords}},{key:"latitude",get:function(){return this.coords.latitude}},{key:"longitude",get:function(){return this.coords.longitude}},{key:"altitude",get:function(){return this.coords.altitude}},{key:"accuracy",get:function(){return this.coords.accuracy}},{key:"altitudeAccuracy",get:function(){return this.coords.altitudeAccuracy}},{key:"heading",get:function(){return this.coords.heading}},{key:"speed",get:function(){return this.coords.speed}},{key:"timestamp",get:function(){return this.pos.timestamp}}]),GeolocationInfo}(),s=function(){function Geolocation(){_classCallCheck(this,Geolocation)}return _createClass(Geolocation,null,[{key:"getCurrentPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Geolocation.navigator.geolocation.getCurrentPosition(function(t){Geolocation.position.setPosition(t),e.runWith(Geolocation.position)},function(e){t.runWith(e)},{enableHighAccuracy:Geolocation.enableHighAccuracy,timeout:Geolocation.timeout,maximumAge:Geolocation.maximumAge})}},{key:"watchPosition",value:function(e,t){return Geolocation.navigator.geolocation.watchPosition(function(t){Geolocation.position.setPosition(t),e.runWith(Geolocation.position)},function(e){t.runWith(e)},{enableHighAccuracy:Geolocation.enableHighAccuracy,timeout:Geolocation.timeout,maximumAge:Geolocation.maximumAge})}},{key:"clearWatch",value:function(e){Geolocation.navigator.geolocation.clearWatch(e)}}]),Geolocation}();s.navigator=navigator,s.position=new r,s.PERMISSION_DENIED=1,s.POSITION_UNAVAILABLE=2,s.TIMEOUT=3,s.supported=!!s.navigator.geolocation,s.enableHighAccuracy=!1,s.timeout=1e10,s.maximumAge=0;var l=function(e){_inherits(HtmlVideo,t.Bitmap);var n=_createSuper(HtmlVideo);function HtmlVideo(){var e;return _classCallCheck(this,HtmlVideo),(e=n.call(this))._w=0,e._h=0,e._width=1,e._height=1,e.createDomElement(),e}return _createClass(HtmlVideo,[{key:"createDomElement",value:function(){var e=this;this._source=this.video=t.ILaya.Browser.createElement("video");var n=this.video.style;n.position="absolute",n.top="0px",n.left="0px",this.video.addEventListener("loadedmetadata",function(){e._w=e.video.videoWidth,e._h=e.video.videoHeight})}},{key:"setSource",value:function(e,t){for(;this.video.childElementCount;)this.video.firstChild.remove();1&t&&this.appendSource(e,"video/mp4"),2&t&&this.appendSource(e+".ogg","video/ogg")}},{key:"appendSource",value:function(e,n){var o=t.ILaya.Browser.createElement("source");o.src=e,o.type=n,this.video.appendChild(o)}},{key:"getVideo",value:function(){return this.video}},{key:"_getSource",value:function(){return this._source}},{key:"destroy",value:function(){_get(_getPrototypeOf(HtmlVideo.prototype),"destroy",this).call(this),t.ILaya.Render.isConchApp&&this.video._destroy()}}]),HtmlVideo}();l.create=function(){return new l};var c=function(){function Media(){_classCallCheck(this,Media)}return _createClass(Media,null,[{key:"supported",value:function(){return!!t.ILaya.Browser.window.navigator.getUserMedia}},{key:"getMedia",value:function(e,n,o){t.ILaya.Browser.window.navigator.getUserMedia&&t.ILaya.Browser.window.navigator.getUserMedia(e,function(e){n.runWith(t.ILaya.Browser.window.URL.createObjectURL(e))},function(e){o.runWith(e)})}}]),Media}(),d=function(e){_inherits(WebGLVideo,l);var n=_createSuper(WebGLVideo);function WebGLVideo(){var e;_classCallCheck(this,WebGLVideo),e=n.call(this);var o=t.LayaGL.instance;return e.gl=t.ILaya.Render.isConchApp?window.LayaGLContext.instance:t.WebGLContext.mainContext,e._source=e.gl.createTexture(),t.WebGLContext.bindTexture(e.gl,o.TEXTURE_2D,e._source),e.gl.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),e.gl.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),e.gl.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),e.gl.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),t.WebGLContext.bindTexture(e.gl,o.TEXTURE_2D,null),e}return _createClass(WebGLVideo,[{key:"updateTexture",value:function(){var e=t.LayaGL.instance;t.WebGLContext.bindTexture(this.gl,e.TEXTURE_2D,this._source),this.gl.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this.gl.texImage2D(e.TEXTURE_2D,0,e.RGB,e.RGB,e.UNSIGNED_BYTE,this.video),this.gl.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),WebGLVideo.curBindSource=this._source}},{key:"destroy",value:function(){this._source&&(this.gl=t.ILaya.Render.isConchApp?window.LayaGLContext.instance:t.WebGLContext.mainContext,this.gl&&(WebGLVideo.curBindSource==this._source&&(t.WebGLContext.bindTexture(this.gl,this.gl.TEXTURE_2D,null),WebGLVideo.curBindSource=null),this.gl.deleteTexture(this._source))),_get(_getPrototypeOf(WebGLVideo.prototype),"destroy",this).call(this)}},{key:"_glTexture",get:function(){return this._source}}]),WebGLVideo}(),u=function(e){_inherits(Video,t.Sprite);var n=_createSuper(Video);function Video(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:320,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:240;return _classCallCheck(this,Video),(e=n.call(this)).htmlVideo=new d,e.videoElement=e.htmlVideo.getVideo(),e.videoElement.layaTarget=_assertThisInitialized(e),e.internalTexture=new t.Texture(e.htmlVideo),e.videoElement.addEventListener("abort",Video.onAbort),e.videoElement.addEventListener("canplay",Video.onCanplay),e.videoElement.addEventListener("canplaythrough",Video.onCanplaythrough),e.videoElement.addEventListener("durationchange",Video.onDurationchange),e.videoElement.addEventListener("emptied",Video.onEmptied),e.videoElement.addEventListener("error",Video.onError),e.videoElement.addEventListener("loadeddata",Video.onLoadeddata),e.videoElement.addEventListener("loadedmetadata",Video.onLoadedmetadata),e.videoElement.addEventListener("loadstart",Video.onLoadstart),e.videoElement.addEventListener("pause",Video.onPause),e.videoElement.addEventListener("play",Video.onPlay),e.videoElement.addEventListener("playing",Video.onPlaying),e.videoElement.addEventListener("progress",Video.onProgress),e.videoElement.addEventListener("ratechange",Video.onRatechange),e.videoElement.addEventListener("seeked",Video.onSeeked),e.videoElement.addEventListener("seeking",Video.onSeeking),e.videoElement.addEventListener("stalled",Video.onStalled),e.videoElement.addEventListener("suspend",Video.onSuspend),e.videoElement.addEventListener("timeupdate",Video.onTimeupdate),e.videoElement.addEventListener("volumechange",Video.onVolumechange),e.videoElement.addEventListener("waiting",Video.onWaiting),e.videoElement.addEventListener("ended",e.onPlayComplete.bind(_assertThisInitialized(e))),e.size(o,i),t.ILaya.Browser.onMobile&&(e.videoElement["x5-playsInline"]=!0,e.videoElement["x5-playsinline"]=!0,e.videoElement.x5PlaysInline=!0,e.videoElement.playsInline=!0,e.videoElement["webkit-playsInline"]=!0,e.videoElement["webkit-playsinline"]=!0,e.videoElement.webkitPlaysInline=!0,e.videoElement.playsinline=!0,e.videoElement.style.playsInline=!0,e.videoElement.crossOrigin="anonymous",e.videoElement.setAttribute("crossorigin","anonymous"),e.videoElement.setAttribute("playsinline","true"),e.videoElement.setAttribute("x5-playsinline","true"),e.videoElement.setAttribute("webkit-playsinline","true"),e.videoElement.autoplay=!0,e._clickhandle=e.onDocumentClick.bind(_assertThisInitialized(e)),t.ILaya.Browser.document.addEventListener("touchend",e._clickhandle)),e}return _createClass(Video,[{key:"onPlayComplete",value:function(e){t.ILaya.Render.isConchApp&&this.videoElement&&this.videoElement.loop||t.ILaya.timer.clear(this,this.renderCanvas),this.event("ended")}},{key:"load",value:function(e){0==e.indexOf("blob:")?this.videoElement.src=e:this.htmlVideo.setSource(e,1)}},{key:"play",value:function(){this.videoElement.play(),t.ILaya.timer.frameLoop(1,this,this.renderCanvas)}},{key:"pause",value:function(){this.videoElement.pause(),t.ILaya.timer.clear(this,this.renderCanvas)}},{key:"reload",value:function(){this.videoElement.load()}},{key:"canPlayType",value:function(e){var t;switch(e){case 1:t="video/mp4";break;case 2:t="video/ogg";break;case 8:t="video/webm"}return this.videoElement.canPlayType(t)}},{key:"renderCanvas",value:function(){0!==this.readyState&&(this.htmlVideo.updateTexture(),this.graphics.clear(),this.graphics.drawTexture(this.internalTexture,0,0,this.width,this.height))}},{key:"onDocumentClick",value:function(){this.videoElement&&0==this.videoElement&&(t.Browser.onIOS?this.videoElement.load():(this.videoElement.play(),this.videoElement.pause()),t.ILaya.Browser.document.removeEventListener("touchend",this._clickhandle))}},{key:"size",value:function(e,n){if(_get(_getPrototypeOf(Video.prototype),"size",this).call(this,e,n),t.ILaya.Render.isConchApp){var o=t.ILaya.Utils.getTransformRelativeToWindow(this,0,0);this.videoElement.width=e*o.scaleX}else this.videoElement.width=e/t.ILaya.Browser.pixelRatio,this.videoElement.height=n/t.Browser.pixelRatio;return this.paused&&this.renderCanvas(),this}},{key:"destroy",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];_get(_getPrototypeOf(Video.prototype),"destroy",this).call(this,e),this.videoElement.removeEventListener("abort",Video.onAbort),this.videoElement.removeEventListener("canplay",Video.onCanplay),this.videoElement.removeEventListener("canplaythrough",Video.onCanplaythrough),this.videoElement.removeEventListener("durationchange",Video.onDurationchange),this.videoElement.removeEventListener("emptied",Video.onEmptied),this.videoElement.removeEventListener("error",Video.onError),this.videoElement.removeEventListener("loadeddata",Video.onLoadeddata),this.videoElement.removeEventListener("loadedmetadata",Video.onLoadedmetadata),this.videoElement.removeEventListener("loadstart",Video.onLoadstart),this.videoElement.removeEventListener("pause",Video.onPause),this.videoElement.removeEventListener("play",Video.onPlay),this.videoElement.removeEventListener("playing",Video.onPlaying),this.videoElement.removeEventListener("progress",Video.onProgress),this.videoElement.removeEventListener("ratechange",Video.onRatechange),this.videoElement.removeEventListener("seeked",Video.onSeeked),this.videoElement.removeEventListener("seeking",Video.onSeeking),this.videoElement.removeEventListener("stalled",Video.onStalled),this.videoElement.removeEventListener("suspend",Video.onSuspend),this.videoElement.removeEventListener("timeupdate",Video.onTimeupdate),this.videoElement.removeEventListener("volumechange",Video.onVolumechange),this.videoElement.removeEventListener("waiting",Video.onWaiting),this.videoElement.removeEventListener("ended",this.onPlayComplete),this.pause(),this.videoElement.layaTarget=null,this.videoElement=null,this.htmlVideo.destroy()}},{key:"syncVideoPosition",value:function(){var e,n=t.ILaya.stage;e=t.ILaya.Utils.getGlobalPosAndScale(this);var o=n._canvasTransform.a,i=n._canvasTransform.d,a=e.x*n.clientScaleX*o+n.offset.x,r=e.y*n.clientScaleY*i+n.offset.y;this.videoElement.style.left=a+"px",this.videoElement.style.top=r+"px",this.videoElement.width=this.width/t.ILaya.Browser.pixelRatio,this.videoElement.height=this.height/t.ILaya.Browser.pixelRatio}},{key:"buffered",get:function(){return this.videoElement.buffered}},{key:"currentSrc",get:function(){return this.videoElement.currentSrc}},{key:"currentTime",get:function(){return this.videoElement.currentTime},set:function(e){this.videoElement.currentTime=e,this.renderCanvas()}},{key:"volume",set:function(e){this.videoElement.volume=e},get:function(){return this.videoElement.volume}},{key:"readyState",get:function(){return this.videoElement.readyState}},{key:"videoWidth",get:function(){return this.videoElement.videoWidth}},{key:"videoHeight",get:function(){return this.videoElement.videoHeight}},{key:"duration",get:function(){return this.videoElement.duration}},{key:"ended",get:function(){return this.videoElement.ended}},{key:"error",get:function(){return this.videoElement.error}},{key:"loop",get:function(){return this.videoElement.loop},set:function(e){this.videoElement.loop=e}},{key:"x",set:function(e){if(_set(_getPrototypeOf(Video.prototype),"x",e,this,!0),t.ILaya.Render.isConchApp){var n=t.ILaya.Utils.getTransformRelativeToWindow(this,0,0);this.videoElement.style.left=n.x}},get:function(){return _get(_getPrototypeOf(Video.prototype),"x",this)}},{key:"y",set:function(e){if(_set(_getPrototypeOf(Video.prototype),"y",e,this,!0),t.ILaya.Render.isConchApp){var n=t.ILaya.Utils.getTransformRelativeToWindow(this,0,0);this.videoElement.style.top=n.y}},get:function(){return _get(_getPrototypeOf(Video.prototype),"y",this)}},{key:"playbackRate",get:function(){return this.videoElement.playbackRate},set:function(e){this.videoElement.playbackRate=e}},{key:"muted",get:function(){return this.videoElement.muted},set:function(e){this.videoElement.muted=e}},{key:"paused",get:function(){return this.videoElement.paused}},{key:"preload",get:function(){return this.videoElement.preload},set:function(e){this.videoElement.preload=e}},{key:"seekable",get:function(){return this.videoElement.seekable}},{key:"seeking",get:function(){return this.videoElement.seeking}},{key:"width",set:function(e){if(t.ILaya.Render.isConchApp){var n=t.ILaya.Utils.getTransformRelativeToWindow(this,0,0);this.videoElement.width=e*n.scaleX}else this.videoElement.width=this.width/t.ILaya.Browser.pixelRatio;_set(_getPrototypeOf(Video.prototype),"width",e,this,!0),this.paused&&this.renderCanvas()},get:function(){return _get(_getPrototypeOf(Video.prototype),"width",this)}},{key:"height",set:function(e){if(t.ILaya.Render.isConchApp){var n=t.ILaya.Utils.getTransformRelativeToWindow(this,0,0);this.videoElement.height=e*n.scaleY}else this.videoElement.height=this.height/t.ILaya.Browser.pixelRatio;_set(_getPrototypeOf(Video.prototype),"height",e,this,!0)},get:function(){return _get(_getPrototypeOf(Video.prototype),"height",this)}}],[{key:"onAbort",value:function(e){e.target.layaTarget.event("abort")}},{key:"onCanplay",value:function(e){e.target.layaTarget.event("canplay")}},{key:"onCanplaythrough",value:function(e){e.target.layaTarget.event("canplaythrough")}},{key:"onDurationchange",value:function(e){e.target.layaTarget.event("durationchange")}},{key:"onEmptied",value:function(e){e.target.layaTarget.event("emptied")}},{key:"onError",value:function(e){e.target.layaTarget.event("error")}},{key:"onLoadeddata",value:function(e){e.target.layaTarget.event("loadeddata")}},{key:"onLoadedmetadata",value:function(e){e.target.layaTarget.event("loadedmetadata")}},{key:"onLoadstart",value:function(e){e.target.layaTarget.event("loadstart")}},{key:"onPause",value:function(e){e.target.layaTarget.event("pause")}},{key:"onPlay",value:function(e){e.target.layaTarget.event("play")}},{key:"onPlaying",value:function(e){e.target.layaTarget.event("playing")}},{key:"onProgress",value:function(e){e.target.layaTarget.event("progress")}},{key:"onRatechange",value:function(e){e.target.layaTarget.event("ratechange")}},{key:"onSeeked",value:function(e){e.target.layaTarget.event("seeked")}},{key:"onSeeking",value:function(e){e.target.layaTarget.event("seeking")}},{key:"onStalled",value:function(e){e.target.layaTarget.event("stalled")}},{key:"onSuspend",value:function(e){e.target.layaTarget.event("suspend")}},{key:"onTimeupdate",value:function(e){e.target.layaTarget.event("timeupdate")}},{key:"onVolumechange",value:function(e){e.target.layaTarget.event("volumechange")}},{key:"onWaiting",value:function(e){e.target.layaTarget.event("waiting")}}]),Video}();u.MP4=1,u.OGG=2,u.CAMERA=4,u.WEBM=8,u.SUPPORT_PROBABLY="probably",u.SUPPORT_MAYBY="maybe",u.SUPPORT_NO="";var h=function(e){_inherits(Gyroscope,t.EventDispatcher);var n=_createSuper(Gyroscope);function Gyroscope(e){var t;return _classCallCheck(this,Gyroscope),(t=n.call(this)).onDeviceOrientationChange=t.onDeviceOrientationChange.bind(_assertThisInitialized(t)),t}return _createClass(Gyroscope,[{key:"on",value:function(e,n,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return _get(_getPrototypeOf(Gyroscope.prototype),"on",this).call(this,e,n,o,i),t.ILaya.Browser.window.addEventListener("deviceorientation",this.onDeviceOrientationChange),this}},{key:"off",value:function(e,n,o){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.hasListener(e)||t.ILaya.Browser.window.removeEventListener("deviceorientation",this.onDeviceOrientationChange),_get(_getPrototypeOf(Gyroscope.prototype),"off",this).call(this,e,n,o,i)}},{key:"onDeviceOrientationChange",value:function(e){Gyroscope.info.alpha=e.alpha,Gyroscope.info.beta=e.beta,Gyroscope.info.gamma=e.gamma,e.webkitCompassHeading&&(Gyroscope.info.alpha=-1*e.webkitCompassHeading,Gyroscope.info.compassAccuracy=e.webkitCompassAccuracy),this.event(t.Event.CHANGE,[e.absolute,Gyroscope.info])}}],[{key:"instance",get:function(){return Gyroscope._instance=Gyroscope._instance||new Gyroscope(0),Gyroscope._instance}}]),Gyroscope}();h.info=new o,e.AccelerationInfo=n,e.Accelerator=i,e.Geolocation=s,e.GeolocationInfo=r,e.Gyroscope=h,e.HtmlVideo=l,e.Media=c,e.RotationInfo=o,e.Shake=a,e.Video=u,e.WebGLVideo=d}(window.Laya=window.Laya||{},Laya);
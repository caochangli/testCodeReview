"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _get(){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=_superPropBase(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}}).apply(this,arguments)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(e);if(t){var r=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}!function(e,t){var n=function(e){_inherits(SpineGLTexture,t.Texture);var n=_createSuper(SpineGLTexture);function SpineGLTexture(e){return _classCallCheck(this,SpineGLTexture),n.call(this,e)}return _createClass(SpineGLTexture,[{key:"getImage",value:function(){return{width:this.sourceWidth,height:this.sourceHeight}}},{key:"setFilters",value:function(e,t){}},{key:"setWraps",value:function(e,t){}}]),SpineGLTexture}(),i=function(e){_inherits(SpineAssetManager,spine.AssetManager);var t=_createSuper(SpineAssetManager);function SpineAssetManager(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return _classCallCheck(this,SpineAssetManager),t.call(this,function(e,t){return r[t]=new n(e.bitmap)},e,i)}return _createClass(SpineAssetManager)}(),r=spine.Color,s=spine.SkeletonClipping,a=spine.Vector2,l=spine.Utils,o=spine.RegionAttachment,u=spine.MeshAttachment,h=spine.ClippingAttachment,p=_createClass(function Renderable(e,t,n){_classCallCheck(this,Renderable),this.vertices=e,this.numVertices=t,this.numFloats=n}),c=function(){function SpineSkeletonRenderer(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];_classCallCheck(this,SpineSkeletonRenderer),this.vertexEffect=null,this.tempColor=new r,this.tempColor2=new r,this.vertexSize=8,this.twoColorTint=!1,this.renderable=new p(null,0,0),this.clipper=new s,this.temp=new a,this.temp2=new a,this.temp3=new r,this.temp4=new r,this.twoColorTint=e,e&&(this.vertexSize+=4),this.vertices=l.newFloatArray(1024*this.vertexSize)}return _createClass(SpineSkeletonRenderer,[{key:"draw",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,a=this.clipper,p=this.premultipliedAlpha,c=this.temp,d=this.temp2,y=this.temp3,f=this.temp4,_=this.renderable,m=null,v=null,g=e.drawOrder,S=null,k=e.color,x=!1;-1==n&&(x=!0);for(var A=0,b=g.length;A<b;A++){var T=a.isClipping()?2:8,w=g[A];if(n>=0&&n==w.data.index&&(x=!0),x){i>=0&&i==w.data.index&&(x=!1);var C=w.getAttachment(),O=void 0;if(C instanceof o){var P=C;_.vertices=this.vertices,_.numVertices=4,_.numFloats=T<<2,P.computeWorldVertices(w.bone,_.vertices,0,T),v=SpineSkeletonRenderer.QUAD_TRIANGLES,m=P.uvs,O=s[P.region.renderObject.page.name],S=P.color}else{if(!(C instanceof u)){if(C instanceof h){var R=C;a.clipStart(w,R);continue}a.clipEndWithSlot(w);continue}var E=C;_.vertices=this.vertices,_.numVertices=E.worldVerticesLength>>1,_.numFloats=_.numVertices*T,_.numFloats>_.vertices.length&&(_.vertices=this.vertices=l.newFloatArray(_.numFloats)),E.computeWorldVertices(w,0,E.worldVerticesLength,_.vertices,0,T),v=E.triangles,O=s[E.region.renderObject.page.name],m=E.uvs,S=E.color}if(null!=O){var D=w.color,B=this.tempColor;B.r=k.r*D.r*S.r,B.g=k.g*D.g*S.g,B.b=k.b*D.b*S.b,B.a=k.a*D.a*S.a,p&&(B.r*=B.a,B.g*=B.a,B.b*=B.a);var M=w.data.blendMode;if(a.isClipping()){a.clipTriangles(_.vertices,_.numFloats,v,v.length,m,B,null,!1);var I=new Float32Array(a.clippedVertices),L=a.clippedTriangles,j=[],N=[],U=[];if(null!=this.vertexEffect)for(var V=this.vertexEffect,F=I,W=0,G=I.length;W<G;W+=8)c.x=F[W],c.y=F[W+1],y.set(F[W+2],F[W+3],F[W+4],F[W+5]),d.x=F[W+6],d.y=F[W+7],f.set(0,0,0,0),V.transform(c,d,y,f),F[W]=c.x,F[W+1]=c.y,F[W+2]=y.r,F[W+3]=y.g,F[W+4]=y.b,F[W+5]=y.a,F[W+6]=d.x,F[W+7]=d.y,j.push(c.x,-c.y),U.length<1&&U.push(y.r,y.g,y.b,y.a),N.push(d.x,d.y);else for(var z=0;Number.isFinite(I[z+6])&&Number.isFinite(I[z+7]);)j.push(I[z]),j.push(-I[z+1]),U.length<1&&(U.push(I[z+2]),U.push(I[z+3]),U.push(I[z+4]),U.push(I[z+5])),N.push(I[z+6]),N.push(I[z+7]),z+=this.vertexSize;var J,K=void 0;switch(M){case 1:K="light";break;case 2:K="multiply";break;case 3:K="screen";break;default:K="normal"}if(J=(255<<24)+255*U[0]|0+(255*U[1]<<8)+(255*U[2]<<16),this._diySkin&&this._diySkin[w.data.name]){var H=this._diySkin[w.data.name].texture,Q=[];if(0==Q.length){var Y=t.Texture.createFromTexture(O,C.region.renderObject.x,C.region.renderObject.y,C.region.renderObject.width,C.region.renderObject.height);Q=t.UVTools.getRelativeUV(Y.uv,N,Q),Q=t.UVTools.getAbsoluteUV(H.uv,Q,Q)}N=Q,O=H}r.graphics.drawTriangles(O,0,0,j,N,new Uint16Array(L),t.Matrix.EMPTY,U[3],null,K,J)}else{var q=_.vertices,X=[],Z=[],$=[];if(null!=this.vertexEffect)for(var ee=this.vertexEffect,te=0,ne=0,ie=_.numFloats;te<ie;te+=8,ne+=2)c.x=q[te],c.y=q[te+1],d.x=m[ne],d.y=m[ne+1],y.setFromColor(B),f.set(0,0,0,0),ee.transform(c,d,y,f),q[te]=c.x,q[te+1]=c.y,q[te+2]=y.r,q[te+3]=y.g,q[te+4]=y.b,q[te+5]=y.a,q[te+6]=d.x,q[te+7]=d.y,X.push(c.x,-c.y),$.length<1&&$.push(y.r,y.g,y.b,y.a),Z.push(d.x,d.y);else for(var re=2,se=0,ae=_.numFloats;re<ae;re+=8,se+=2){q[re]=B.r,q[re+1]=B.g,q[re+2]=B.b,q[re+3]=B.a;var le=m[se],oe=m[se+1];q[re+4]=le,q[re+5]=oe,X.push(q[re-2],-q[re-1]),$.length<1&&$.push(B.r,B.g,B.b,B.a),Z.push(le,oe)}var ue,he=void 0;switch(M){case 1:he="light";break;case 2:he="multiply";break;case 3:he="screen";break;default:he="normal"}if(ue=(255<<24)+255*$[0]|0+(255*$[1]<<8)+(255*$[2]<<16),this._diySkin&&this._diySkin[w.data.name]){var pe=this._diySkin[w.data.name].texture,ce=[];if(0==ce.length){var de=t.Texture.createFromTexture(O,C.region.renderObject.x,C.region.renderObject.y,C.region.renderObject.width,C.region.renderObject.height);ce=t.UVTools.getRelativeUV(de.uv,Z,ce),ce=t.UVTools.getAbsoluteUV(pe.uv,ce,ce)}Z=ce,O=pe}r.graphics.drawTriangles(O,0,0,X,Z,new Uint16Array(v),t.Matrix.EMPTY,$[3],null,he,ue)}}a.clipEndWithSlot(w)}else a.clipEndWithSlot(w)}a.clipEnd()}}]),SpineSkeletonRenderer}();c.QUAD_TRIANGLES=[0,1,2,2,3,0];var d=spine.TimeKeeper,y=spine.Skeleton,f=spine.AnimationState,_=spine.AnimationStateData,m=function(e){_inherits(SpineSkeleton,t.Sprite);var n=_createSuper(SpineSkeleton);function SpineSkeleton(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return _classCallCheck(this,SpineSkeleton),(e=n.call(this)).currentPlayTime=0,e._pause=!0,e._currAniName=null,e._playbackRate=1,e._playAudio=!0,e._soundChannelArr=[],e.trackIndex=0,t&&e.init(t),e._ins=_assertThisInitialized(e),e}return _createClass(SpineSkeleton,[{key:"init",value:function(e){var n=this;this._templet=e,this._templet._addReference(1),this.skeleton=new y(this._templet.skeletonData),this.stateData=new _(this.skeleton.data),this.state=new f(this.stateData),this.skeletonRenderer=new c(!1),this.timeKeeper=new d,this.skeletonRenderer.premultipliedAlpha=this._templet.spinePremultipliedAlpha,this.state.addListener({start:function(e){},interrupt:function(e){},end:function(e){},dispose:function(e){},complete:function(e){e.loop?n.event(t.Event.COMPLETE):(n._currAniName=null,n.event(t.Event.STOPPED))},event:function(i,r){var s,a={audioValue:r.data.audioPath,audioPath:r.data.audioPath,floatValue:r.floatValue,intValue:r.intValue,name:r.data.name,stringValue:r.stringValue,time:1e3*r.time,balance:r.balance,volume:r.volume};n.event(t.Event.LABEL,a),n._playAudio&&a.audioValue&&(s=t.SoundManager.playSound(e._textureDic.root+a.audioValue,1,t.Handler.create(n,n._onAniSoundStoped),null,(1e3*n.currentPlayTime-a.time)/1e3),t.SoundManager.playbackRate=n._playbackRate,s&&n._soundChannelArr.push(s))}})}},{key:"play",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=(!(arguments.length>5&&void 0!==arguments[5])||arguments[5],!(arguments.length>6&&void 0!==arguments[6])||arguments[6]);this._playAudio=s,r/=1e3;var a=e;if((i/=1e3)<0||r<0)throw new Error("SpineSkeleton: start and end must large than zero.");if(0!==r&&i>r)throw new Error("SpineSkeleton: start must less than end.");if("number"==typeof a&&(a=this.getAniNameByIndex(e)),n||this._pause||this._currAniName!=a){this._currAniName=a,this.state.setAnimation(this.trackIndex,a,t);var l=this.state.getCurrent(this.trackIndex);l.animationStart=i,r&&r<l.animationEnd&&(l.animationEnd=r);var o=l.animation.duration;this._duration=o,this._playStart=i,this._playEnd=r<=o?r:o,this._pause&&(this._pause=!1,this.timer.frameLoop(1,this,this._update,null,!0)),this._update()}}},{key:"_update",value:function(){this.timeKeeper.update();var e=this.timeKeeper.delta*this._playbackRate,t=this.state.getCurrent(this.trackIndex);this.state.update(e),this.state.apply(this.skeleton);var n=t.animationLast;this.currentPlayTime=Math.max(0,n),this.state&&this.skeleton&&(this.skeleton.updateWorldTransform(),this._ins.graphics.clear(),this.skeletonRenderer.draw(this.skeleton,-1,-1,this._ins,this._templet._textureDic))}},{key:"getAnimNum",value:function(){return this._templet.skeletonData.animations.length}},{key:"getAniNameByIndex",value:function(e){return this._templet.getAniNameByIndex(e)}},{key:"getSlotByName",value:function(e){return this.skeleton.findSlot(e)}},{key:"playbackRate",value:function(e){this._playbackRate=e}},{key:"showSkinByName",value:function(e){this.showSkinByIndex(this._templet.getSkinIndexByName(e))}},{key:"showSkinByIndex",value:function(e){var t=this.skeleton.data.skins[e];this.skeleton.setSkin(t),this.skeleton.setSlotsToSetupPose()}},{key:"setSlotSkin",value:function(e,t){this.skeletonRenderer&&(this.skeletonRenderer._diySkin||(this.skeletonRenderer._diySkin={}),this.skeletonRenderer._diySkin[e]={texture:t,uv:{}})}},{key:"stop",value:function(){this._pause||(this._pause=!0,this._currAniName=null,this.timer.clear(this,this._update),this.state.update(-this.currentPlayTime),this.currentPlayTime=0,this.event(t.Event.STOPPED),this._soundChannelArr.length>0&&this._onAniSoundStoped(!0))}},{key:"paused",value:function(){if(!this._pause&&(this._pause=!0,this.timer.clear(this,this._update),this.event(t.Event.PAUSED),this._soundChannelArr.length>0))for(var e,n=this._soundChannelArr.length,i=0;i<n;i++)(e=this._soundChannelArr[i]).isStopped||e.pause()}},{key:"resume",value:function(){if(this._pause&&(this._pause=!1,this.timer.frameLoop(1,this,this._update,null,!0),this._soundChannelArr.length>0))for(var e,t=this._soundChannelArr.length,n=0;n<t;n++)(e=this._soundChannelArr[n]).audioBuffer&&e.resume()}},{key:"_onAniSoundStoped",value:function(e){for(var t,n=this._soundChannelArr.length,i=0;i<n;i++)((t=this._soundChannelArr[i]).isStopped||e)&&(!t.isStopped&&t.stop(),this._soundChannelArr.splice(i,1),n--,i--)}},{key:"destroy",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(_get(_getPrototypeOf(SpineSkeleton.prototype),"destroy",this).call(this,e),this._templet&&(this._templet._removeReference(1),this._templet=null),this.timeKeeper=null,this.skeleton=null,this.state&&(this.state.clearListeners(),this.state=null),this.skeletonRenderer){var t=this.skeletonRenderer._diySkin;if(t)for(var n in t){var i=t[n];delete t[n],i.texture=null,i.uv=null}this.skeletonRenderer=null}this.timer.clear(this,this._update),this._soundChannelArr.length>0&&this._onAniSoundStoped(!0)}},{key:"templet",get:function(){return this._templet}},{key:"addAnimation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n/=1e3;var i=e;"number"==typeof i&&(i=this.getAniNameByIndex(i)),this._currAniName=i,this.state.addAnimation(this.trackIndex,i,t,n)}},{key:"setMix",value:function(e,t,n){n/=1e3;var i=e;"number"==typeof i&&(i=this.getAniNameByIndex(i));var r=t;"number"==typeof r&&(r=this.getAniNameByIndex(r)),this.stateData.setMix(i,r,n)}},{key:"getBoneByName",value:function(e){return this.skeleton.findBone(e)}},{key:"getSkeleton",value:function(){return this.skeleton}},{key:"setSlotAttachment",value:function(e,t){this.skeleton.setAttachment(e,t)}},{key:"currentTime",set:function(e){if(this._currAniName&&this._templet){if((e/=1e3)<this._playStart||this._playEnd&&e>this._playEnd||e>this._duration)throw new Error("AnimationPlayer: value must large than playStartTime,small than playEndTime.");this.state.update(e-this.currentPlayTime),this.currentPlayTime=e}}},{key:"playState",get:function(){return this._currAniName?this._pause?SpineSkeleton.paused:SpineSkeleton.playing:SpineSkeleton.stopped}}]),SpineSkeleton}();m.stopped=0,m.paused=1,m.playing=2,t.ILaya.regClass(m),t.ClassUtils.regClass("laya.layaspine.SpineSkeleton",m),t.ClassUtils.regClass("Laya.SpineSkeleton",m);var v,g,S=function(e){_inherits(SpineTempletBase,t.Resource);var n=_createSuper(SpineTempletBase);function SpineTempletBase(){var e;return _classCallCheck(this,SpineTempletBase),(e=n.call(this))._isDestroyed=!1,e._textureDic={},e._layaPremultipliedAlpha=!0,e._spinePremultipliedAlpha=!1,e}return _createClass(SpineTempletBase,[{key:"templet",get:function(){return this._templet},set:function(e){this._templet=e}},{key:"isDestroyed",get:function(){return this._isDestroyed},set:function(e){this._isDestroyed=e}},{key:"spinePremultipliedAlpha",get:function(){return this._spinePremultipliedAlpha},set:function(e){this._spinePremultipliedAlpha=e}},{key:"buildArmature",value:function(){return new m(this)}},{key:"getAniNameByIndex",value:function(e){if(this.isDestroyed||!this.skeletonData||!this.skeletonData.animations||this.skeletonData.animations.length<=e)return null;var t=this.skeletonData.animations[e];return t?t.name:null}},{key:"getSkinIndexByName",value:function(e){if(this.isDestroyed||!this.skeletonData||!this.skeletonData.skins)return-1;for(var t=this.skeletonData.skins,n=0,i=t.length;n<i;n++)if(t[n].name==e)return n;return-1}},{key:"destroy",value:function(){var e;for(e in this.isDestroyed=!0,this._textureDic)"root"!=e&&e&&(this._textureDic[e].destroy(),delete this._textureDic[e],t.ILaya.loader.clearRes(this._textureDic.root+e));_get(_getPrototypeOf(SpineTempletBase.prototype),"destroy",this).call(this)}}]),SpineTempletBase}(),k=spine.AssetManager,x=spine.AtlasAttachmentLoader,A=spine.SkeletonJson,b=spine.SkeletonBinary,T=function(e){_inherits(SpineTemplet_3_x,S);var i=_createSuper(SpineTemplet_3_x);function SpineTemplet_3_x(){var e;return _classCallCheck(this,SpineTemplet_3_x),(e=i.call(this))._textureDic={},e}return _createClass(SpineTemplet_3_x,[{key:"loadAni",value:function(e){var n=e.lastIndexOf("/")+1,i=e.slice(0,n),r=(e=e.slice(n)).replace(".json",".atlas").replace(".skel",".atlas");this._textureDic.root=i,this.clientId=i,this.atlasUrl=r,this.jsonOrSkelUrl=e,this.assetManager=new k(this._textureLoader.bind(this),i),this.assetManager.loadTextureAtlas(r),e.endsWith(".skel")?this.assetManager.loadBinary(e):this.assetManager.loadText(e),t.Laya.timer.frameOnce(1,this,this.loop)}},{key:"_textureLoader",value:function(e){var t=e.url.replace(this.clientId,"");return this._textureDic[t]=new n(e.bitmap)}},{key:"loop",value:function(){this.assetManager.isLoadingComplete()?this.parseSpineAni():this.assetManager.hasErrors()?this.event(t.Event.ERROR,"load failed:"+this.assetManager.getErrors()):t.Laya.timer.frameOnce(1,this,this.loop)}},{key:"parseSpineAni",value:function(){if(this.isDestroyed)this.destroy();else{var e=this.assetManager.get(this.atlasUrl),n=new x(e);this.jsonOrSkelUrl.endsWith(".skel")?(this.skeletonBinary=new b(n),this.skeletonData=this.skeletonBinary.readSkeletonData(this.assetManager.get(this.jsonOrSkelUrl))):(this.skeletonJson=new A(n),this.skeletonData=this.skeletonJson.readSkeletonData(this.assetManager.get(this.jsonOrSkelUrl))),this.event(t.Event.COMPLETE,this)}}},{key:"buildArmature",value:function(){return _get(_getPrototypeOf(SpineTemplet_3_x.prototype),"buildArmature",this).call(this)}},{key:"getAniNameByIndex",value:function(e){return _get(_getPrototypeOf(SpineTemplet_3_x.prototype),"getAniNameByIndex",this).call(this,e)}},{key:"getSkinIndexByName",value:function(e){return _get(_getPrototypeOf(SpineTemplet_3_x.prototype),"getSkinIndexByName",this).call(this,e)}},{key:"destroy",value:function(){_get(_getPrototypeOf(SpineTemplet_3_x.prototype),"destroy",this).call(this)}}]),SpineTemplet_3_x}(),w=spine.AtlasAttachmentLoader,C=spine.SkeletonJson,O=spine.SkeletonBinary,P=function(e){_inherits(SpineTemplet_4_0,S);var n=_createSuper(SpineTemplet_4_0);function SpineTemplet_4_0(){var e;return _classCallCheck(this,SpineTemplet_4_0),(e=n.call(this))._textureDic={},e}return _createClass(SpineTemplet_4_0,[{key:"loadAni",value:function(e){var n=e.lastIndexOf("/")+1,r=e.slice(0,n),s=(e=e.slice(n)).replace(".json",".atlas").replace(".skel",".atlas");this._textureDic.root=r,this.pathPrefix=r,this.atlasUrl=s,this.jsonOrSkelUrl=e,this.assetManager=new i(r,new spine.Downloader,this._textureDic),this.assetManager.loadTextureAtlas(s),e.endsWith(".skel")?this.assetManager.loadBinary(e):this.assetManager.loadJson(e),t.Laya.timer.frameOnce(1,this,this.loop)}},{key:"loop",value:function(){this.isDestroyed?this.destroy():this.assetManager.isLoadingComplete()?this.parseSpineAni():this.assetManager.hasErrors()?this.event(t.Event.ERROR,"load failed:"+this.assetManager.getErrors()):t.Laya.timer.frameOnce(1,this,this.loop)}},{key:"parseSpineAni",value:function(){if(this.isDestroyed)this.destroy();else{var e=this.assetManager.get(this.atlasUrl);if(e){var n=new w(e);this.jsonOrSkelUrl.endsWith(".skel")?(this.skeletonBinary=new O(n),this.skeletonData=this.skeletonBinary.readSkeletonData(this.assetManager.get(this.jsonOrSkelUrl))):(this.skeletonJson=new C(n),this.skeletonData=this.skeletonJson.readSkeletonData(this.assetManager.get(this.jsonOrSkelUrl))),this.isParserComplete=!0,this.event(t.Event.COMPLETE,this)}else this.event(t.Event.ERROR,this)}}},{key:"buildArmature",value:function(){return _get(_getPrototypeOf(SpineTemplet_4_0.prototype),"buildArmature",this).call(this)}},{key:"getAniNameByIndex",value:function(e){return _get(_getPrototypeOf(SpineTemplet_4_0.prototype),"getAniNameByIndex",this).call(this,e)}},{key:"getSkinIndexByName",value:function(e){return _get(_getPrototypeOf(SpineTemplet_4_0.prototype),"getSkinIndexByName",this).call(this,e)}},{key:"destroy",value:function(){t.Laya.timer.clear(this,this.loop),_get(_getPrototypeOf(SpineTemplet_4_0.prototype),"destroy",this).call(this),this.atlasUrl&&(t.ILaya.loader.clearRes(this.pathPrefix+this.atlasUrl),this.atlasUrl=null),this.jsonOrSkelUrl&&(t.ILaya.loader.clearRes(this.pathPrefix+this.jsonOrSkelUrl),this.jsonOrSkelUrl=null)}}]),SpineTemplet_4_0}(),R=function(t){_inherits(SpineTemplet,S);var n=_createSuper(SpineTemplet);function SpineTemplet(t){var i,r;if(_classCallCheck(this,SpineTemplet),i=n.call(this),t===e.SpineVersion.v3_7||t===e.SpineVersion.v3_8)r=new T;else{if(t!==e.SpineVersion.v4_0)throw new Error("传入参数错误，请与服务提供商联系");r=new P}return _possibleConstructorReturn(i,r)}return _createClass(SpineTemplet,[{key:"loadAni",value:function(e){}},{key:"buildArmature",value:function(){return null}},{key:"getAniNameByIndex",value:function(e){return null}},{key:"getSkinIndexByName",value:function(e){return null}},{key:"destroy",value:function(){}}]),SpineTemplet}();(v=e.SpineVersion||(e.SpineVersion={})).v3_7="v3_7",v.v3_8="v3_8",v.v4_0="v4_0",(g=e.SpineFormat||(e.SpineFormat={})).json="json",g.binary="binary",e.SpineAssetManager=i,e.SpineGLTexture=n,e.SpineSkeleton=m,e.SpineSkeletonRenderer=c,e.SpineTemplet=R,e.SpineTempletBase=S,e.SpineTemplet_3_x=T,e.SpineTemplet_4_0=P}(window.Laya=window.Laya||{},Laya);
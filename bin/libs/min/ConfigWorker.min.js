function __getset(t,e,i,s,_){t?(s&&(e["_$GET_"+i]=s),_&&(e["_$SET_"+i]=_)):(s&&un(e,"_$get_"+i,s),_&&un(e,"_$set_"+i,_)),s&&_?Object.defineProperty(e,i,{get:s,set:_,enumerable:!1,configurable:!0}):(s&&Object.defineProperty(e,i,{get:s,enumerable:!1,configurable:!0}),_&&Object.defineProperty(e,i,{set:_,enumerable:!1,configurable:!0}))}function un(t,e,i){return i||(i=t[e]),__propun.value=i,Object.defineProperty(t,e,__propun),i}onmessage=function(t){var e=t.data.buffer,i=(new Date).getTime();if(FileReader){var s=new FileReader;s.readAsText(new Blob([e]),"utf8"),s.onload=function(){i=(new Date).getTime();var t=this.result;if(t){var s=JSON.parse(t);postMessage(s,[e])}else postMessage(null)}}else{var _=new Byte;_.endian=Byte.LITTLE_ENDIAN,_.writeArrayBuffer(e),_.pos=0;var r=_.readUTFBytes();if(i=(new Date).getTime(),r){var n=JSON.parse(r);postMessage(n,[e])}else postMessage(null)}};var __propun={writable:!0,enumerable:!1,configurable:!0},Byte=function(){function t(t){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,t?(this._u8d_=new Uint8Array(t),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}var e=t.prototype;return e.___resizeBuffer=function(t){try{var e=new Uint8Array(t);null!=this._u8d_&&(this._u8d_.length<=t?e.set(this._u8d_):e.set(this._u8d_.subarray(0,t))),this._u8d_=e,this._d_=new DataView(e.buffer)}catch(i){throw"___resizeBuffer err:"+t}},e.rUTF=function(t){for(var e="",i=this._pos_+t,s=0,_=0,r=0,n=String.fromCharCode,h=this._u8d_,o=0;this._pos_<i;)s=h[this._pos_++],128>s?0!=s&&(e+=n(s)):224>s?e+=n((63&s)<<6|127&h[this._pos_++]):240>s?(_=h[this._pos_++],e+=n((31&s)<<12|(127&_)<<6|127&h[this._pos_++])):(_=h[this._pos_++],r=h[this._pos_++],e+=n((15&s)<<18|(127&_)<<12|r<<6&127|127&h[this._pos_++])),o++;return e},e.getCustomString=function(t){for(var e="",i=0,s=0,_=0,r=String.fromCharCode,n=this._u8d_;t>0;)if(s=n[this._pos_],128>s)e+=r(s),this._pos_++,t--;else for(i=s-128,this._pos_++,t-=i;i>0;)s=n[this._pos_++],_=n[this._pos_++],e+=r(_<<8|s),i--;return e},e.clear=function(){this._pos_=0,this.length=0},e.__getBuffer=function(){return this._d_.buffer},e.writeUTFBytes=function(t){t+="";for(var e=0,i=t.length;i>e;e++){var s=t.charCodeAt(e);127>=s?this.writeByte(s):2047>=s?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|s>>6,128|63&s],this._pos_),this._pos_+=2):65535>=s?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|s>>12,128|s>>6&63,128|63&s],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|s>>18,128|s>>12&63,128|s>>6&63,128|63&s],this._pos_),this._pos_+=4)}},e.writeUTFString=function(t){var e=this.pos;this.writeUint16(1),this.writeUTFBytes(t);var i=this.pos-e-2;if(i>=65536)throw"writeUTFString byte len more than 65536";this._d_.setUint16(e,i,this._xd_)},e.readUTFString=function(){return this.readUTFBytes(this.getUint16())},e.getUTFString=function(){return this.readUTFString()},e.readUTFBytes=function(t){if(void 0===t&&(t=-1),0==t)return"";var e=this.bytesAvailable;if(t>e)throw"readUTFBytes error - Out of bounds";return t=t>0?t:e,this.rUTF(t)},e.getUTFBytes=function(t){return void 0===t&&(t=-1),this.readUTFBytes(t)},e.writeByte=function(t){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,t),this._pos_+=1},e.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},e.getByte=function(){return this.readByte()},e.ensureWrite=function(t){this._length<t&&(this._length=t),this._allocated_<t&&(this.length=t)},e.writeArrayBuffer=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),0>e||0>i)throw"writeArrayBuffer error - Out of bounds";0==i&&(i=t.byteLength-e),this.ensureWrite(this._pos_+i);var s=new Uint8Array(t);this._u8d_.set(s.subarray(e,e+i),this._pos_),this._pos_+=i},__getset(0,e,"buffer",function(){var t=this._d_.buffer;return t.byteLength==this.length?t:t.slice(0,this.length)}),__getset(0,e,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(t){this._xd_="littleEndian"==t}),__getset(0,e,"length",function(){return this._length},function(t){this._allocated_<t?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(t,2*this._allocated_))):this._allocated_>t&&this.___resizeBuffer(this._allocated_=t),this._length=t}),__getset(0,e,"pos",function(){return this._pos_},function(t){this._pos_=t}),__getset(0,e,"bytesAvailable",function(){return this._length-this._pos_}),t.getSystemEndian=function(){if(!t._sysEndian){var e=new ArrayBuffer(2);new DataView(e).setInt16(0,256,!0),t._sysEndian=256===new Int16Array(e)[0]?"littleEndian":"bigEndian"}return t._sysEndian},t.BIG_ENDIAN="bigEndian",t.LITTLE_ENDIAN="littleEndian",t._sysEndian=null,t}();